name: Welcome Street Food Innovators

on:
  issues:
    types: [opened]
  pull_request_target:
    types: [opened]

jobs:
  greet:
    runs-on: ubuntu-latest
    steps:
      - name: Welcome First-Time Contributors
        uses: actions/first-interaction@v1
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          issue-message: |
            üåü Hello @${{ github.actor }}!
            
            Welcome to the Digital Transformation & Empowerment of Street Food Vendors project! üç≤üöÄ
            
            Thank you for opening your first issue. Your input helps us empower street food vendors with technology, driving positive social impact.  
            
            üëâ Please share your ideas, questions, or suggestions. Check out our [Contribution Guide](CONTRIBUTING.md) to get started.
            
            Together, let's make street food smarter, safer, and more successful!
          pr-message: |
            üéâ Cheers @${{ github.actor }}!
            
            You just made your first pull request to a project dedicated to bringing digital innovation to street food vendors. Your code helps improve the lives and businesses of vendors everywhere. üôå
            
            Please ensure your PR aligns with our [contribution guidelines](CONTRIBUTING.md). If you want a project mentor, mention `@morningstarxcdcode` in a comment and we‚Äôll reach out!
            
            üåç Let‚Äôs build tech solutions that make a difference on the streets.

      - name: Label First-Time PRs for Street Food Impact
        if: github.event_name == 'pull_request_target'
        uses: actions-ecosystem/action-add-labels@v1
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          labels: |
            street-food-innovator
            first-time-contributor

      - name: Celebrate with Emoji
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const { owner, repo, number } = context.issue;
            await github.reactions.createForIssue({
              owner,
              repo,
              issue_number: number,
              content: 'tada'
            });

      - name: Assign Street Food Mentor (Optional)
        if: github.event_name == 'pull_request_target'
        uses: pozil/auto-assign-issue@v1
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          assignees: |
            morningstarxcdcode
          numOfAssignee: 1
          
      - name: Create PR Review
        env:
          GH_TOKEN: ${{ secrets.GH_PAT_REVIEWER }}
        run: |
          curl -X POST \
            -H "Authorization: token $GH_TOKEN" \
            -H "Accept: application/vnd.github.v3+json" \
            https://api.github.com/repos/${{ github.repository }}/pulls/${{ github.event.pull_request.number }}/reviews \
            -d '{"` to use the PAT for API calls thatbody": require elevated "Welcome!", "event": "COMMENT"}'
